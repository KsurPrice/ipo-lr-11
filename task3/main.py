import json                       # Импортируем модуль json для работы с файлами в формате JSON
from task2.main import fetch_news  # Импортируем функцию fetch_news из задания 2

def main():
    print("Введите количество новостей для сохранения:")  # Просим пользователя ввести число
    try:
        n = int(input("> "))       # Читаем ввод и преобразуем в число
    except ValueError:             # Если введено не число
        print("Ошибка: нужно ввести число.")  # Сообщаем об ошибке
        return                     # Завершаем выполнение программы

    news = fetch_news()[:n]        # Получаем список новостей и берём первые n штук

    # Открываем файл data.json для записи (если файла нет — создаётся)
    with open("data.json", "w", encoding="utf-8") as f:
        # Сохраняем список новостей в формате JSON
        # ensure_ascii=False — чтобы кириллица сохранялась нормально
        # indent=4 — для красивого форматирования (отступы)
        json.dump(news, f, ensure_ascii=False, indent=4)

    print("Данные сохранены в data.json")  # Сообщаем пользователю об успешном сохранении

if __name__ == "__main__":         # Проверяем, что файл запущен напрямую
    main()                         # Запускаем функцию main()
